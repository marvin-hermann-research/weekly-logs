# Weekly Log – 2025-08-03

## Summary of Activities

### 28.07
- Initially planned a straightforward implementation of console commands for the *Behaviour Command Interface*  
- During in-depth research, discovered that the proper ROS2-conformant way is to use **services** rather than direct command input  
- Pivoted towards a service-based architecture, studied the concept thoroughly, and updated the corresponding section in the `ros_masterpost.md`  
- Postponed actual implementation of the interface due to this architectural shift  

### 29.07
- While implementing the newly planned service system, uncovered four major gaps in my ROS2 knowledge:  
  1. `.xml` files must be manually updated – `colcon build` does not handle this automatically  
  2. `ament_python` is not the conventionally preferred build system in research environments; `ament_cmake` is  
  3. Contrary to previous assumptions, `ament_cmake` **does support** Python nodes  
  4. To use services correctly, the package must adopt `ament_cmake`  
- Fully explored `ament_cmake`, wrote a new masterpost to document the structure and syntax of `CMakeLists.txt`  
- Authored a second masterpost detailing the migration process from `ament_python` to `ament_cmake`  
- Backed up the current feature branch before initiating the build system transition  
- Refactored the entire package to support `ament_cmake`:  
  - Modified the `.xml` configuration  
  - Removed `setup.py` and `setup.cfg`  
  - Created a new `CMakeLists.txt` file  

### 30.07
- Realized that ROS2 services are not needed for the current project scope  
- Decision: roll back to `ament_python` and abandon the service-based structure  
- Console publishing to topics is not only sufficient but aligns better with the existing architecture  
- Although the two-day detour led to a discarded implementation, it yielded valuable experience in:  
  - Service mechanics  
  - `ament_cmake` structure  
  - Package-level XML configuration  

### 31.07
- Restored ROS2 functionality for sensor nodes via `ros2 run`:  
  - Resolved issues related to incorrect `setup.py` paths after creating new packages  
  - Added missing `__init__.py` files in newly created folders  
- Re-attempted the console-based *Behaviour Command Interface*, but the functionality fully overlapped with the existing `Evaluator` classes  
  - Decided to abandon the concept in favor of leveraging `CLIOverridePublisher` to override conditions externally  
  - Documented this in the `ros_masterpost.md` under a new section: *Setting Conditions via Console*  
- Cleaned up feature branches, merged completed work, and updated Git issues accordingly  

### 01.08
- Started implementation of the `Application` class to coordinate the project  
  - Renamed several components for consistency, e.g., `LeftLeg` → `LeftLegNode`  
- Encountered import issues with `py_trees_ros2`  
  - Researched and initially attempted manual repo-based installation  
  - Ultimately resolved by consulting the ROS documentation and installing the appropriate dependency  
  - Learned that the package is originally called `py_trees_ros` and was ported from ROS1  
- Added a new section on *py_trees_ros installation* to the `ros_masterpost.md`  
- Partial implementation of the `Application` class committed  

---

## Key Insights

- Unnecessary architectural pivots can still provide rich insight: the `ament_cmake` and ROS2 services exploration, though ultimately set aside, improved both theoretical understanding and tooling flexibility  
- Maintaining alignment between project scope and ROS2 best practices is essential – not every ROS feature must be used if a simpler alternative suffices  
- The modularity of condition management through `Evaluator` nodes and the `CLIOverridePublisher` mechanism enables a robust fallback strategy for real-time decision overrides  

---

## Challenges & Fixes

- **Misguided architectural pivot to ROS2 services and `ament_cmake`**  
  ✔ **Fix:** Rolled back to `ament_python`, restored original project simplicity, and documented key insights in the masterpost  

- **Sensor node launch failures via `ros2 run`**  
  ✔ **Fix:** Corrected paths in `setup.py` and ensured proper package initialization using `__init__.py` files  

- **Library import confusion (py_trees_ros2)**  
  ✔ **Fix:** Consulted ROS documentation, installed the correct dependency, and updated the documentation accordingly  

---

## Next Steps

- Finalize the `Application` class and ensure correct behavior tree integration  
- Begin integration of sensor and actuator systems within the behavior tree structure  
- Refine and expand the `ros_masterpost.md` with architectural visuals and advanced usage patterns  
- Review all Git issues and re-prioritize tasks based on the updated project scope  
- Begin preparing visual demos for the GitHub project presentation  
